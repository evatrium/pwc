import{isObj as t,isArray as e,extend as i,def as s}from"@iosio/util";import{h as r,render as h}from"preact";let o=document,l=!1,n=t=>(t=o.createElement("style"),o.head.appendChild(t),e=>(t.appendChild(o.createTextNode(e)),t)),u=n(),a=n(),c=(t,e)=>{e=e||String;try{if(e==Boolean?t=[!0,1,"","1","true"].includes(t):"string"==typeof t&&(t=e==Number?Number(t):e==Object||e==Array?JSON.parse(t):t),{}.toString.call(t)==`[object ${e.name}]`)return{value:t,error:e==Number&&Number.isNaN(t)}}catch(t){}return{value:t,error:!0}},b=(i,s,r)=>{null===r||!1===r?i.removeAttribute(s):i.setAttribute(s,t(r)||e(r)?JSON.stringify(r):r)},m=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase(),p=t=>t.replace(/-(\w)/g,(t,e)=>e.toUpperCase());a(" .___ {visibility: inherit;}",!0);let d=Symbol(),y=Symbol(),v={},g=(t,e,i)=>{var s,h;return(t=>a(`${t} {visibility:hidden}`))(t),customElements.define(t,(h=s=class extends f{constructor(...t){super(...t),this.render=t=>r(e,t)}},s.propTypes=e.propTypes||i,h)),e=>r(t,e,e.children)},_=(t,e,i)=>g("x-"+t,e,i);class f extends HTMLElement{constructor(){super(),this.context=v,this.update=()=>(this.t||(this.t=this.i.then(t=>{h(this.render(i({host:this},this[d])),this.s),!this.h&&!l&&requestAnimationFrame(()=>this.classList.add("___")),this.h=!0,this.t=!1})),this.t),this.emit=(t,e,i)=>(i||this).dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0,composed:!0})),this.s=this.attachShadow({mode:"open"}),this[d]={},this.i=new Promise(t=>this.o=t),this.update();let{l:t}=this.constructor,e=t.length;for(;e--;)t[e](this)}connectedCallback(){!this.h&&this.o()}attributeChangedCallback(t,e,i){t!==this[y]&&e!==i&&(this[p(t)]=i)}static get observedAttributes(){let{propTypes:t,prototype:e}=this;return this.l=[],t?Object.keys(t).map(i=>{let r=m(i),h=t[i].name?{type:t[i]}:t[i];return i in e||s(e,i,{get(){return this[d][i]},set(t){let{value:e,error:s}=c(t,h.type);if(s&&null!=e)throw`[${i}] must be type [${h.type.name}]`;e!==this[d][i]&&(h.reflect&&this.i.then(()=>{this[y]=r,b(this,r,h.type!==Boolean||e?e:null),this[y]=!1}),this[d][i]=e,this.update())}}),h.value&&this.l.push(t=>t[i]=h.value),r}):[]}disconnectedCallback(){!this.isConnected&&h(()=>null,this.s)}}export{v as context,u as globalStyles,g as pwc,_ as x};
//# sourceMappingURL=index.esm.js.map
