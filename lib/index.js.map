{"version":3,"file":"index.js","sources":["../node_modules/@iosio/util/lib/index.esm.js","../src/utils.js","../node_modules/preact/dist/preact.module.js","../src/PWC.js"],"sourcesContent":["const r=(r,e,t)=>Object.defineProperty(r,e,t),e=Array.isArray,t=r=>\"object\"==typeof r&&r instanceof Object,n=r=>\"function\"==typeof r,o=r=>\"string\"==typeof r,f=r=>\"number\"==typeof r,u=(r,e,t)=>r.addEventListener(e,t),i=(r,e,t)=>r.removeEventListener(e,t),s=(r,t,n)=>{if(!e(r))return u(r,t,n),()=>i(r,t,n);let o=[];return r.forEach(r=>{u(r[0],r[1],r[2]),o.push(()=>i(r[0],r[1],r[2]))}),()=>o.forEach(r=>r())};function c(r,e){for(let t in e)r[t]=e[t];return r}const a=(r,e)=>{for(var t in e=e||{},r=r||{})if(r[t]!==e[t])return!0;for(var t in e)if(r[t]!==e[t])return!0;return!1},p=()=>{let r=[],e=(e,t)=>{let n=[];for(t=r.length;t--;)r[t]===e?e=null:n.push(r[t]);r=n};return{unsub:e,sub:t=>(r.push(t),()=>e(t)),notify:e=>r.forEach(r=>r&&r(e))}};export{p as Subie,u as addListener,r as def,s as eventListener,c as extend,e as isArray,n as isFunc,f as isNum,t as isObj,o as isString,a as propsChanged,i as removeListener};\n","import {isArray, isObj} from \"@iosio/util\";\n\nlet d = document,\n    TEST_ENV = process.env.NODE_ENV === 'test',\n    /**\n     * creates a single style sheet. returns a function to add to the same sheet\n     * @returns {function} for adding styles to the same stylesheet\n     */\n    styleSheet = (style) => {\n         style = d.createElement('style');\n         d.head.appendChild(style);\n        return (css) => (style.appendChild(d.createTextNode(css)), style);\n    },\n    globalStyles = styleSheet(),\n    visibilityStyleSheet = styleSheet(),\n    webComponentVisibility = (tag) => visibilityStyleSheet(`${tag} {visibility:hidden}`),\n    /**\n     * for parsing the incoming attributes into consumable props\n     * @param value\n     * @param type\n     * @returns {{error: boolean, value: *}}\n     */\n    formatType = (value, type) => {\n        type = type || String;\n        try {\n            if (type == Boolean) value = [true, 1, \"\", \"1\", \"true\"].includes(value);\n            else if (typeof value == \"string\") {\n                value = type == Number ? Number(value)\n                    : type == Object || type == Array ? JSON.parse(value) : value;\n            }\n            if ({}.toString.call(value) == `[object ${type.name}]`)\n                return {value, error: type == Number && Number.isNaN(value)};\n        } catch (e) {\n        }\n        return {value, error: true};\n    },\n\n    /**\n     * will set or remove the attribute based on the truthyness of the value.\n     * if the type of value === object (accounts for array) and the node is a custom pwc, it will json stringify the value\n     * @param node\n     * @param attr\n     * @param value\n     */\n    updateAttribute = (node, attr, value) => {\n        (value === null || value === false)\n            ? node.removeAttribute(attr)\n            : node.setAttribute(attr, (isObj(value) || isArray(value)) ? JSON.stringify(value) : value);\n    },\n    propToAttr = (prop) => prop.replace(/([A-Z])/g, \"-$1\").toLowerCase(),\n    attrToProp = (attr) => attr.replace(/-(\\w)/g, (all, letter) => letter.toUpperCase());\n\n\n    visibilityStyleSheet(` .___ {visibility: inherit;}`, true);\n\nexport {\n    TEST_ENV,\n    styleSheet,\n    globalStyles,\n    webComponentVisibility,\n    formatType,\n    updateAttribute,\n    propToAttr,\n    attrToProp,\n};\n","var n, l, u, t, i, r, o, f = {}, e = [], c = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;\n\nfunction s(n, l) {\n    for (var u in l) n[u] = l[u];\n    return n\n}\n\nfunction a(n) {\n    var l = n.parentNode;\n    l && l.removeChild(n)\n}\n\nfunction h(n, l, u) {\n    var t, i, r, o, f = arguments;\n    if (l = s({}, l), arguments.length > 3) for (u = [u], t = 3; t < arguments.length; t++) u.push(f[t]);\n    if (null != u && (l.children = u), null != n && null != n.defaultProps) for (i in n.defaultProps) void 0 === l[i] && (l[i] = n.defaultProps[i]);\n    return o = l.key, null != (r = l.ref) && delete l.ref, null != o && delete l.key, v(n, l, o, r)\n}\n\nfunction v(l, u, t, i) {\n    var r = {\n        type: l,\n        props: u,\n        key: t,\n        ref: i,\n        __k: null,\n        __p: null,\n        __b: 0,\n        __e: null,\n        l: null,\n        __c: null,\n        constructor: void 0\n    };\n    return n.vnode && n.vnode(r), r\n}\n\nfunction p() {\n    return {}\n}\n\nfunction y(n) {\n    return n.children\n}\n\nfunction d(n) {\n    if (null == n || \"boolean\" == typeof n) return null;\n    if (\"string\" == typeof n || \"number\" == typeof n) return v(null, n, null, null);\n    if (null != n.__e || null != n.__c) {\n        var l = v(n.type, n.props, n.key, null);\n        return l.__e = n.__e, l\n    }\n    return n\n}\n\nfunction m(n, l) {\n    this.props = n, this.context = l\n}\n\nfunction w(n, l) {\n    if (null == l) return n.__p ? w(n.__p, n.__p.__k.indexOf(n) + 1) : null;\n    for (var u; l < n.__k.length; l++) if (null != (u = n.__k[l]) && null != u.__e) return u.__e;\n    return \"function\" == typeof n.type ? w(n) : null\n}\n\nfunction g(n) {\n    var l, u;\n    if (null != (n = n.__p) && null != n.__c) {\n        for (n.__e = n.__c.base = null, l = 0; l < n.__k.length; l++) if (null != (u = n.__k[l]) && null != u.__e) {\n            n.__e = n.__c.base = u.__e;\n            break\n        }\n        return g(n)\n    }\n}\n\nfunction k(l) {\n    (!l.__d && (l.__d = !0) && 1 === u.push(l) || i !== n.debounceRendering) && (i = n.debounceRendering, (n.debounceRendering || t)(_))\n}\n\nfunction _() {\n    var n;\n    for (u.sort(function (n, l) {\n        return l.__v.__b - n.__v.__b\n    }); n = u.pop();) n.__d && n.forceUpdate(!1)\n}\n\nfunction b(n, l, u, t, i, r, o, c, s) {\n    var h, v, p, y, d, m, g, k = u && u.__k || e, _ = k.length;\n    if (c == f && (c = null != r ? r[0] : _ ? w(u, 0) : null), h = 0, l.__k = x(l.__k, function (u) {\n        if (null != u) {\n            if (u.__p = l, u.__b = l.__b + 1, null === (p = k[h]) || p && u.key == p.key && u.type === p.type) k[h] = void 0; else for (v = 0; v < _; v++) {\n                if ((p = k[v]) && u.key == p.key && u.type === p.type) {\n                    k[v] = void 0;\n                    break\n                }\n                p = null\n            }\n            if (y = $(n, u, p = p || f, t, i, r, o, null, c, s), (v = u.ref) && p.ref != v && (g || (g = [])).push(v, u.__c || y, u), null != y) {\n                if (null == m && (m = y), null != u.l) y = u.l, u.l = null; else if (r == p || y != c || null == y.parentNode) {\n                    n:if (null == c || c.parentNode !== n) n.appendChild(y); else {\n                        for (d = c, v = 0; (d = d.nextSibling) && v < _; v += 2) if (d == y) break n;\n                        n.insertBefore(y, c)\n                    }\n                    \"option\" == l.type && (n.value = \"\")\n                }\n                c = y.nextSibling, \"function\" == typeof l.type && (l.l = y)\n            }\n        }\n        return h++, u\n    }), l.__e = m, null != r && \"function\" != typeof l.type) for (h = r.length; h--;) null != r[h] && a(r[h]);\n    for (h = _; h--;) null != k[h] && D(k[h], k[h]);\n    if (g) for (h = 0; h < g.length; h++) A(g[h], g[++h], g[++h])\n}\n\nfunction x(n, l, u) {\n    if (null == u && (u = []), null == n || \"boolean\" == typeof n) l && u.push(l(null)); else if (Array.isArray(n)) for (var t = 0; t < n.length; t++) x(n[t], l, u); else u.push(l ? l(d(n)) : n);\n    return u\n}\n\nfunction C(n, l, u, t, i) {\n    var r;\n    for (r in u) r in l || N(n, r, null, u[r], t);\n    for (r in l) i && \"function\" != typeof l[r] || \"value\" === r || \"checked\" === r || u[r] === l[r] || N(n, r, l[r], u[r], t)\n}\n\nfunction P(n, l, u) {\n    \"-\" === l[0] ? n.setProperty(l, u) : n[l] = \"number\" == typeof u && !1 === c.test(l) ? u + \"px\" : u || \"\"\n}\n\nfunction N(n, l, u, t, i) {\n    var r, o, f, e, c;\n    if (\"key\" === (l = i ? \"className\" === l ? \"class\" : l : \"class\" === l ? \"className\" : l) || \"children\" === l) ; else if (\"style\" === l) if (r = n.style, \"string\" == typeof u) r.cssText = u; else {\n        if (\"string\" == typeof t && (r.cssText = \"\", t = null), t) for (o in t) u && o in u || P(r, o, \"\");\n        if (u) for (f in u) t && u[f] === t[f] || P(r, f, u[f])\n    } else \"o\" === l[0] && \"n\" === l[1] ? (e = l !== (l = l.replace(/Capture$/, \"\")), c = l.toLowerCase(), l = (c in n ? c : l).slice(2), u ? (t || n.addEventListener(l, T, e), (n.u || (n.u = {}))[l] = u) : n.removeEventListener(l, T, e)) : \"list\" !== l && \"tagName\" !== l && \"form\" !== l && !i && l in n ? n[l] = null == u ? \"\" : u : \"function\" != typeof u && \"dangerouslySetInnerHTML\" !== l && (l !== (l = l.replace(/^xlink:?/, \"\")) ? null == u || !1 === u ? n.removeAttributeNS(\"http://www.w3.org/1999/xlink\", l.toLowerCase()) : n.setAttributeNS(\"http://www.w3.org/1999/xlink\", l.toLowerCase(), u) : null == u || !1 === u ? n.removeAttribute(l) : n.setAttribute(l, u))\n}\n\nfunction T(l) {\n    return this.u[l.type](n.event ? n.event(l) : l)\n}\n\nfunction $(l, u, t, i, r, o, f, e, c, a) {\n    var h, v, p, d, w, g, k, _, x, C, P = u.type;\n    if (void 0 !== u.constructor) return null;\n    (h = n.__b) && h(u);\n    try {\n        n:if (\"function\" == typeof P) {\n            if (_ = u.props, x = (h = P.contextType) && i[h.__c], C = h ? x ? x.props.value : h.__p : i, t.__c ? k = (v = u.__c = t.__c).__p = v.__E : (\"prototype\" in P && P.prototype.render ? u.__c = v = new P(_, C) : (u.__c = v = new m(_, C), v.constructor = P, v.render = H), x && x.sub(v), v.props = _, v.state || (v.state = {}), v.context = C, v.__n = i, p = v.__d = !0, v.__h = []), null == v.__s && (v.__s = v.state), null != P.getDerivedStateFromProps && s(v.__s == v.state ? v.__s = s({}, v.__s) : v.__s, P.getDerivedStateFromProps(_, v.__s)), p) null == P.getDerivedStateFromProps && null != v.componentWillMount && v.componentWillMount(), null != v.componentDidMount && f.push(v); else {\n                if (null == P.getDerivedStateFromProps && null == e && null != v.componentWillReceiveProps && v.componentWillReceiveProps(_, C), !e && null != v.shouldComponentUpdate && !1 === v.shouldComponentUpdate(_, v.__s, C)) {\n                    for (v.props = _, v.state = v.__s, v.__d = !1, v.__v = u, u.__e = null != c ? c !== t.__e ? c : t.__e : null, u.__k = t.__k, h = 0; h < u.__k.length; h++) u.__k[h] && (u.__k[h].__p = u);\n                    break n\n                }\n                null != v.componentWillUpdate && v.componentWillUpdate(_, v.__s, C)\n            }\n            for (d = v.props, w = v.state, v.context = C, v.props = _, v.state = v.__s, (h = n.__r) && h(u), v.__d = !1, v.__v = u, v.__P = l, h = v.render(v.props, v.state, v.context), u.__k = null != h && h.type == y && null == h.key ? h.props.children : h, null != v.getChildContext && (i = s(s({}, i), v.getChildContext())), p || null == v.getSnapshotBeforeUpdate || (g = v.getSnapshotBeforeUpdate(d, w)), b(l, u, t, i, r, o, f, c, a), v.base = u.__e; h = v.__h.pop();) v.__s && (v.state = v.__s), h.call(v);\n            p || null == d || null == v.componentDidUpdate || v.componentDidUpdate(d, w, g), k && (v.__E = v.__p = null)\n        } else u.__e = z(t.__e, u, t, i, r, o, f, a);\n        (h = n.diffed) && h(u)\n    } catch (l) {\n        n.__e(l, u, t)\n    }\n    return u.__e\n}\n\nfunction j(l, u) {\n    for (var t; t = l.pop();) try {\n        t.componentDidMount()\n    } catch (l) {\n        n.__e(l, t.__v)\n    }\n    n.__c && n.__c(u)\n}\n\nfunction z(n, l, u, t, i, r, o, c) {\n    var s, a, h, v, p = u.props, y = l.props;\n    if (i = \"svg\" === l.type || i, null == n && null != r) for (s = 0; s < r.length; s++) if (null != (a = r[s]) && (null === l.type ? 3 === a.nodeType : a.localName === l.type)) {\n        n = a, r[s] = null;\n        break\n    }\n    if (null == n) {\n        if (null === l.type) return document.createTextNode(y);\n        n = i ? document.createElementNS(\"http://www.w3.org/2000/svg\", l.type) : document.createElement(l.type), r = null\n    }\n    return null === l.type ? p !== y && (null != r && (r[r.indexOf(n)] = null), n.data = y) : l !== u && (null != r && (r = e.slice.call(n.childNodes)), h = (p = u.props || f).dangerouslySetInnerHTML, v = y.dangerouslySetInnerHTML, c || (v || h) && (v && h && v.__html == h.__html || (n.innerHTML = v && v.__html || \"\")), C(n, y, p, i, c), l.__k = l.props.children, v || b(n, l, u, t, \"foreignObject\" !== l.type && i, r, o, f, c), c || (\"value\" in y && void 0 !== y.value && y.value !== n.value && (n.value = null == y.value ? \"\" : y.value), \"checked\" in y && void 0 !== y.checked && y.checked !== n.checked && (n.checked = y.checked))), n\n}\n\nfunction A(l, u, t) {\n    try {\n        \"function\" == typeof l ? l(u) : l.current = u\n    } catch (l) {\n        n.__e(l, t)\n    }\n}\n\nfunction D(l, u, t) {\n    var i, r, o;\n    if (n.unmount && n.unmount(l), (i = l.ref) && A(i, null, u), t || \"function\" == typeof l.type || (t = null != (r = l.__e)), l.__e = l.l = null, null != (i = l.__c)) {\n        if (i.componentWillUnmount) try {\n            i.componentWillUnmount()\n        } catch (l) {\n            n.__e(l, u)\n        }\n        i.base = i.__P = null\n    }\n    if (i = l.__k) for (o = 0; o < i.length; o++) i[o] && D(i[o], u, t);\n    null != r && a(r)\n}\n\nfunction H(n, l, u) {\n    return this.constructor(n, u)\n}\n\nfunction I(l, u, t) {\n    var i, o, c;\n    n.__p && n.__p(l, u), o = (i = t === r) ? null : t && t.__k || u.__k, l = h(y, null, [l]), c = [], $(u, i ? u.__k = l : (t || u).__k = l, o || f, f, void 0 !== u.ownerSVGElement, t && !i ? [t] : o ? null : e.slice.call(u.childNodes), c, !1, t || f, i), j(c, l)\n}\n\nfunction L(n, l) {\n    I(n, l, r)\n}\n\nfunction M(n, l) {\n    return l = s(s({}, n.props), l), arguments.length > 2 && (l.children = e.slice.call(arguments, 2)), v(n.type, l, l.key || n.key, l.ref || n.ref)\n}\n\nfunction O(n) {\n    var l = {}, u = {\n        __c: \"__cC\" + o++, __p: n, Consumer: function (n, l) {\n            return this.shouldComponentUpdate = function (n, u, t) {\n                return t !== l\n            }, n.children(l)\n        }, Provider: function (n) {\n            var t, i = this;\n            return this.getChildContext || (t = [], this.getChildContext = function () {\n                return l[u.__c] = i, l\n            }, this.shouldComponentUpdate = function (n) {\n                t.some(function (l) {\n                    l.__P && (l.context = n.value, k(l))\n                })\n            }, this.sub = function (n) {\n                t.push(n);\n                var l = n.componentWillUnmount;\n                n.componentWillUnmount = function () {\n                    t.splice(t.indexOf(n), 1), l && l.call(n)\n                }\n            }), n.children\n        }\n    };\n    return u.Consumer.contextType = u, u\n}\n\nn = {}, l = function (n) {\n    return null != n && void 0 === n.constructor\n}, m.prototype.setState = function (n, l) {\n    var u = this.__s !== this.state && this.__s || (this.__s = s({}, this.state));\n    (\"function\" != typeof n || (n = n(u, this.props))) && s(u, n), null != n && this.__v && (l && this.__h.push(l), k(this))\n}, m.prototype.forceUpdate = function (n) {\n    var l, u, t, i = this.__v, r = this.__v.__e, o = this.__P;\n    o && (l = !1 !== n, u = [], t = $(o, i, s({}, i), this.__n, void 0 !== o.ownerSVGElement, null, u, l, null == r ? w(i) : r), j(u, i), t != r && g(i)), n && n()\n}, m.prototype.render = y, u = [], t = \"function\" == typeof Promise ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, i = n.debounceRendering, n.__e = function (n, l, u) {\n    for (var t; l = l.__p;) if ((t = l.__c) && !t.__p) try {\n        if (t.constructor && null != t.constructor.getDerivedStateFromError) t.setState(t.constructor.getDerivedStateFromError(n)); else {\n            if (null == t.componentDidCatch) continue;\n            t.componentDidCatch(n)\n        }\n        return k(t.__E = t)\n    } catch (l) {\n        n = l\n    }\n    throw n\n}, r = f, o = 0;\nexport {\n    I as render,\n    L as hydrate,\n    h as createElement,\n    h,\n    y as Fragment,\n    p as createRef,\n    l as isValidElement,\n    m as Component,\n    M as cloneElement,\n    O as createContext,\n    x as toChildArray,\n    D as _unmount,\n    n as options\n};\n//# sourceMappingURL=preact.module.js.map\n","import {\n    formatType,\n    updateAttribute,\n    propToAttr,\n    attrToProp,\n    webComponentVisibility,\n    TEST_ENV\n} from \"../src/utils\";\n\nimport {def, extend} from \"@iosio/util\";\n\nimport {h, render} from \"preact\";\n\nlet PROPS = Symbol(),\n    IGNORE_ATTR = Symbol(),\n    context = {},\n    pwc = (tag, PreactComponent, propTypes) => {\n        webComponentVisibility(tag);\n        customElements.define(tag, class extends PWC {\n                static propTypes = PreactComponent.propTypes || propTypes;\n                render = props => h(PreactComponent, props);\n            }\n        );\n        return (props) => h(tag, props, props.children);\n    },\n    x = (t, c, p) => pwc('x-' + t, c, p);\n\nclass PWC extends HTMLElement {\n    //easier theming\n    context = context;\n\n    constructor() {\n        super();\n        this.attachShadow({mode: 'open'});\n        this._root = (this.shadowRoot || this);//in case i decide to later include the option to not use shadowDom\n        this[PROPS] = {};\n        this._mounted = new Promise(mount => (this._mount = mount));\n        this.update();\n        let {_initAttrs} = this.constructor;\n        let length = _initAttrs.length;\n        while (length--) _initAttrs[length](this);\n    }\n    /*\n     adding visibility inherit on next tick after (inspired by stencil.js)\n     will prevent flash of un-styled content (common complaint with web components).\n     Removing this functionality during testing makes life easier\n    */\n    update = () => {\n        if (!this._process) {\n            this._process = this._mounted.then(_ => {\n                render(this.render(extend({host: this}, this[PROPS])), this._root);\n                !this._hasMounted && !TEST_ENV && requestAnimationFrame(() => this.classList.add('___'));\n                this._hasMounted = true;\n                this._process = false;\n            });\n        }\n        return this._process;\n    };\n\n    connectedCallback() {\n        !this._hasMounted && this._mount();\n    }\n\n    emit = (name, detail, from) =>\n        (from || this).dispatchEvent(\n            new CustomEvent(name, {detail, bubbles: true, composed: true})\n        );\n\n    attributeChangedCallback(attr, oldValue, newValue) {\n        if (attr === this[IGNORE_ATTR] || oldValue === newValue) return;\n        this[attrToProp(attr)] = newValue;\n    }\n\n    /* inspired by atomico  */\n    static get observedAttributes() {\n        let {propTypes, prototype} = this;\n        this._initAttrs = [];\n        if (!propTypes) return [];\n        return Object.keys(propTypes).map(prop => {\n            let attr = propToAttr(prop),\n                schema = propTypes[prop].name ? {type: propTypes[prop]} : propTypes[prop];\n            if (!(prop in prototype)) {\n                def(prototype, prop, {\n                    get() {\n                        return this[PROPS][prop]\n                    },\n                    set(nextValue) {\n                        let {value, error} = formatType(nextValue, schema.type);\n                        if (error && value != null) throw `[${prop}] must be type [${schema.type.name}]`;\n                        if (value === this[PROPS][prop]) return;\n                        if (schema.reflect) {\n                            this._mounted.then(() => {\n                                this[IGNORE_ATTR] = attr;\n                                updateAttribute(this, attr, schema.type === Boolean && !value ? null : value);\n                                this[IGNORE_ATTR] = false;\n                            });\n                        }\n                        this[PROPS][prop] = value;\n                        this.update();\n                    }\n                });\n            }\n            schema.value && this._initAttrs.push(self => (self[prop] = schema.value));\n            return attr;\n        });\n    };\n\n    /*  web components may call disconnected callback when the node is just being moved.\n        for example, if a user manually relocates the web component in the dom via something like node.insertBefore ...\n        so checking if the web component is still connected is necessary  */\n    disconnectedCallback() {\n        !this.isConnected && render(() => null, this._root);\n    }\n}\n\nexport {x, pwc, context}\n\n\n\n"],"names":["r","e","t","Object","defineProperty","Array","isArray","c","d","document","TEST_ENV","styleSheet","style","createElement","head","appendChild","css","createTextNode","globalStyles","visibilityStyleSheet","webComponentVisibility","tag","formatType","value","type","String","Boolean","includes","Number","JSON","parse","toString","call","name","error","isNaN","updateAttribute","node","attr","removeAttribute","setAttribute","isObj","stringify","propToAttr","prop","replace","toLowerCase","attrToProp","all","letter","toUpperCase","const","EMPTY_OBJ","IS_NON_DIMENSIONAL","PROPS","Symbol","IGNORE_ATTR","context","pwc","PreactComponent","propTypes","customElements","define","render","props","h","PWC","children","x","p","update","_process","_mounted","then","_","extend","host","_root","_hasMounted","requestAnimationFrame","classList","add","emit","detail","from","dispatchEvent","CustomEvent","bubbles","composed","attachShadow","mode","shadowRoot","Promise","mount","_mount","_initAttrs","constructor","length","oldValue","newValue","isConnected","prototype","keys","map","schema","def","get","set","nextValue","reflect","push","self","HTMLElement"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAMA,CAAC,GAAC,WAACA,EAAD,EAAGC,CAAH,EAAKC,CAAL;SAASC,MAAM,CAACC,cAAP,CAAsBJ,EAAtB,EAAwBC,CAAxB,EAA0BC,CAA1B,CAAT;CAAR;IAA8CD,CAAC,GAACI,KAAK,CAACC,OAAtD;IAA8DJ,CAAC,GAAC,SAAFA,CAAE,CAAAF,CAAC;SAAE,oBAAiBA,CAAjB,KAAoBA,CAAC,YAAYG,MAAnC;CAAjE;;AAAuZ,SAASI,CAAT,CAAWP,CAAX,EAAaC,CAAb,EAAe;OAAK,IAAIC,EAAR,IAAaD,CAAb;IAAeD,CAAC,CAACE,EAAD,CAAD,GAAKD,CAAC,CAACC,EAAD,CAAN;;;SAAiBF,CAAP;;;ICE5bQ,CAAC,GAAGC,QAAR;IACIC,QAAQ,GAAG,cAAyB,MADxC;;AAEI;;;;AAIAC,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAW;EACnBA,KAAK,GAAGJ,CAAC,CAACK,aAAF,CAAgB,OAAhB,CAAR;EACAL,CAAC,CAACM,IAAF,CAAOC,WAAP,CAAmBH,KAAnB;SACM,UAACI,GAAD;WAAUJ,KAAK,CAACG,WAAN,CAAkBP,CAAC,CAACS,cAAF,CAAiBD,GAAjB,CAAlB,GAA0CJ,KAApD;GAAP;CATR;IAWIM,YAAY,GAAGP,UAAU,EAX7B;IAYIQ,oBAAoB,GAAGR,UAAU,EAZrC;IAaIS,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACC,GAAD;SAASF,oBAAoB,WAAIE,GAAJ,0BAA7B;CAb7B;;AAcI;;;;;;AAMAC,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAQC,IAAR,EAAiB;EAC1BA,IAAI,GAAGA,IAAI,IAAIC,MAAf;;MACI;QACID,IAAI,IAAIE,OAAZ,EAAqBH,KAAK,GAAG,CAAC,IAAD,EAAO,CAAP,EAAU,EAAV,EAAc,GAAd,EAAmB,MAAnB,EAA2BI,QAA3B,CAAoCJ,KAApC,CAAR,CAArB,KACK,IAAI,OAAOA,KAAP,IAAgB,QAApB,EAA8B;MAC/BA,KAAK,GAAGC,IAAI,IAAII,MAAR,GAAiBA,MAAM,CAACL,KAAD,CAAvB,GACFC,IAAI,IAAIrB,MAAR,IAAkBqB,IAAI,IAAInB,KAA1B,GAAkCwB,IAAI,CAACC,KAAL,CAAWP,KAAX,CAAlC,GAAsDA,KAD5D;;QAGA,GAAGQ,QAAH,CAAYC,IAAZ,CAAiBT,KAAjB,uBAAsCC,IAAI,CAACS,IAA3C,MAAJ,EACI,OAAO;MAACV,KAAK,EAALA,KAAD;MAAQW,KAAK,EAAEV,IAAI,IAAII,MAAR,IAAkBA,MAAM,CAACO,KAAP,CAAaZ,KAAb;KAAxC;GAPR,CAQE,OAAOtB,CAAP,EAAU;;SAEL;IAACsB,KAAK,EAALA,KAAD;IAAQW,KAAK,EAAE;GAAtB;CAhCR;;AAmCI;;;;;;;AAOAE,eAAe,GAAG,SAAlBA,eAAkB,CAACC,IAAD,EAAOC,IAAP,EAAaf,KAAb,EAAuB;EACpCA,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAA7B,GACMc,IAAI,CAACE,eAAL,CAAqBD,IAArB,CADN,GAEMD,IAAI,CAACG,YAAL,CAAkBF,IAAlB,EAAyBG,CAAK,CAAClB,KAAD,CAAL,IAAgBjB,CAAO,CAACiB,KAAD,CAAxB,GAAmCM,IAAI,CAACa,SAAL,CAAenB,KAAf,CAAnC,GAA2DA,KAAnF,CAFN;CA3CR;IA+CIoB,UAAU,GAAG,SAAbA,UAAa,CAACC,IAAD;SAAUA,IAAI,CAACC,OAAL,CAAa,UAAb,EAAyB,KAAzB,EAAgCC,WAAhC,EAAV;CA/CjB;IAgDIC,UAAU,GAAG,SAAbA,UAAa,CAACT,IAAD;SAAUA,IAAI,CAACO,OAAL,CAAa,QAAb,EAAuB,UAACG,GAAD,EAAMC,MAAN;WAAiBA,MAAM,CAACC,WAAP,EAAjB;GAAvB,CAAV;CAhDjB;;AAmDI/B,oBAAoB,iCAAiC,IAAjC,CAApB;;KCrDGgC;KAAAA;OAAAA;IAAMC,CAAND;IAAMC,GAAND;IAAkB,CAAlBA;IACkB,CAAA,GACZE,EAFNF;IAE2BlD,GAAA,GAAA,EAF3BkD;IAE2B5C,GAAA,GAAA,iEAF3B4C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICaHG,KAAK,GAAGC,MAAM,EAAlB;IACIC,WAAW,GAAGD,MAAM,EADxB;IAEIE,OAAO,GAAG,EAFd;IAGIC,GAAG,GAAG,SAANA,GAAM,CAACrC,GAAD,EAAMsC,eAAN,EAAuBC,SAAvB,EAAqC;;;EACvCxC,sBAAsB,CAACC,GAAD,CAAtB;EACAwC,cAAc,CAACC,MAAf,CAAsBzC,GAAtB;;;;;;;;;;;;;;;;;;YAEQ0C,MAFR,GAEiB,UAAAC,KAAK;eAAIC,CAAC,CAACN,eAAD,EAAkBK,KAAlB,CAAL;OAFtB;;;;;;IAAyCE,GAAzC,UACeN,SADf,GAC2BD,eAAe,CAACC,SAAhB,IAA6BA,SADxD;SAKO,UAACI,KAAD;WAAWC,CAAC,CAAC5C,GAAD,EAAM2C,KAAN,EAAaA,KAAK,CAACG,QAAnB,CAAZ;GAAP;CAVR;IAYIC,GAAC,GAAG,SAAJA,CAAI,CAAClE,CAAD,EAAIK,CAAJ,EAAO8D,CAAP;SAAaX,GAAG,CAAC,OAAOxD,CAAR,EAAWK,CAAX,EAAc8D,CAAd,CAAhB;CAZR;;IAcMH;;;;;;iBAIY;;;;;;WAFdT,OAEc,GAFJA,OAEI;;WAgBda,MAhBc,GAgBL,YAAM;UACP,CAAC,OAAKC,QAAV,EAAoB;eACXA,QAAL,GAAgB,OAAKC,QAAL,CAAcC,IAAd,CAAmB,UAAAC,CAAC,EAAI;UACpCX,CAAM,CAAC,OAAKA,MAAL,CAAYY,CAAM,CAAC;YAACC,IAAI;WAAN,EAAe,OAAKtB,KAAL,CAAf,CAAlB,CAAD,EAAiD,OAAKuB,KAAtD,CAAN;WACC,OAAKC,WAAN,IAAqB,CAACpE,QAAtB,IAAkCqE,qBAAqB,CAAC;mBAAM,OAAKC,SAAL,CAAeC,GAAf,CAAmB,KAAnB,CAAN;WAAD,CAAvD;iBACKH,WAAL,GAAmB,IAAnB;iBACKP,QAAL,GAAgB,KAAhB;SAJY,CAAhB;;;aAOG,OAAKA,QAAZ;KAzBU;;WAgCdW,IAhCc,GAgCP,UAACjD,IAAD,EAAOkD,MAAP,EAAeC,IAAf;aACH,CAACA,IAAI,kCAAL,EAAeC,aAAf,CACI,IAAIC,WAAJ,CAAgBrD,IAAhB,EAAsB;QAACkD,MAAM,EAANA,MAAD;QAASI,OAAO,EAAE,IAAlB;QAAwBC,QAAQ,EAAE;OAAxD,CADJ,CADG;KAhCO;;WAELC,YAAL,CAAkB;MAACC,IAAI,EAAE;KAAzB;;WACKb,KAAL,GAAc,OAAKc,UAAL,kCAAd,CAHU;;WAILrC,KAAL,IAAc,EAAd;WACKkB,QAAL,GAAgB,IAAIoB,OAAJ,CAAY,UAAAC,KAAK;aAAK,OAAKC,MAAL,GAAcD,KAAnB;KAAjB,CAAhB;;WACKvB,MAAL;;QACKyB,UAPK,GAOS,OAAKC,WAPd,CAOLD,UAPK;QAQNE,MAAM,GAAGF,UAAU,CAACE,MAAxB;;WACOA,MAAM,EAAb;MAAiBF,UAAU,CAACE,MAAD,CAAV;;;;;;;;;;;;;;wCAmBD;OACf,KAAKnB,WAAN,IAAqB,KAAKgB,MAAL,EAArB;;;;6CAQqBxD,MAAM4D,UAAUC,UAAU;UAC3C7D,IAAI,KAAK,KAAKkB,WAAL,CAAT,IAA8B0C,QAAQ,KAAKC,QAA/C,EAAyD;WACpDpD,UAAU,CAACT,IAAD,CAAf,IAAyB6D,QAAzB;;;;;;;;;;2CAwCmB;OAClB,KAAKC,WAAN,IAAqBrC,CAAM,CAAC;eAAM,IAAN;OAAD,EAAa,KAAKc,KAAlB,CAA3B;;;;wBArC4B;;;UACvBjB,SADuB,GACC,IADD,CACvBA,SADuB;UACZyC,SADY,GACC,IADD,CACZA,SADY;WAEvBN,UAAL,GAAkB,EAAlB;UACI,CAACnC,SAAL,EAAgB,OAAO,EAAP;aACTzD,MAAM,CAACmG,IAAP,CAAY1C,SAAZ,EAAuB2C,GAAvB,CAA2B,UAAA3D,IAAI,EAAI;YAClCN,IAAI,GAAGK,UAAU,CAACC,IAAD,CAArB;YACI4D,MAAM,GAAG5C,SAAS,CAAChB,IAAD,CAAT,CAAgBX,IAAhB,GAAuB;UAACT,IAAI,EAAEoC,SAAS,CAAChB,IAAD;SAAvC,GAAiDgB,SAAS,CAAChB,IAAD,CADvE;;YAEI,EAAEA,IAAI,IAAIyD,SAAV,CAAJ,EAA0B;UACtBI,CAAG,CAACJ,SAAD,EAAYzD,IAAZ,EAAkB;YACjB8D,GADiB,iBACX;qBACK,KAAKpD,KAAL,EAAYV,IAAZ,CAAP;aAFa;YAIjB+D,GAJiB,eAIbC,SAJa,EAIF;;;gCACUtF,UAAU,CAACsF,SAAD,EAAYJ,MAAM,CAAChF,IAAnB,CADpB;kBACND,KADM,eACNA,KADM;kBACCW,KADD,eACCA,KADD;;kBAEPA,KAAK,IAAIX,KAAK,IAAI,IAAtB,EAA4B,iBAAUqB,IAAV,6BAAiC4D,MAAM,CAAChF,IAAP,CAAYS,IAA7C;kBACxBV,KAAK,KAAK,KAAK+B,KAAL,EAAYV,IAAZ,CAAd,EAAiC;;kBAC7B4D,MAAM,CAACK,OAAX,EAAoB;qBACXrC,QAAL,CAAcC,IAAd,CAAmB,YAAM;kBACrB,MAAI,CAACjB,WAAD,CAAJ,GAAoBlB,IAApB;kBACAF,eAAe,CAAC,MAAD,EAAOE,IAAP,EAAakE,MAAM,CAAChF,IAAP,KAAgBE,OAAhB,IAA2B,CAACH,KAA5B,GAAoC,IAApC,GAA2CA,KAAxD,CAAf;kBACA,MAAI,CAACiC,WAAD,CAAJ,GAAoB,KAApB;iBAHJ;;;mBAMCF,KAAL,EAAYV,IAAZ,IAAoBrB,KAApB;mBACK+C,MAAL;;WAhBL,CAAH;;;QAoBJkC,MAAM,CAACjF,KAAP,IAAgB,MAAI,CAACwE,UAAL,CAAgBe,IAAhB,CAAqB,UAAAC,IAAI;iBAAKA,IAAI,CAACnE,IAAD,CAAJ,GAAa4D,MAAM,CAACjF,KAAzB;SAAzB,CAAhB;eACOe,IAAP;OAzBG,CAAP;;;;;mBAnDU0E;;;;;;;"}